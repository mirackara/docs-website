---
title: Kubernetesの使用を開始
tags:
  - Integrations
  - Kubernetes integration
  - Installation
metaDescription: 'New Relic''s Kubernetes integration: How to install and activate the integration, and what data is reported.'
translationType: human
---

import kubernetesPivotal from 'images/kubernetes_logo_pivotal.png'

import kubernetesAks from 'images/kubernetes_logo_aks.png'

import kubernetesOpenshift from 'images/kubernetes_logo_openshift.png'

import kubernetesCke from 'images/kubernetes_logo_cke.png'

import kubernetesEks from 'images/kubernetes_logo_eks.png'

New Relic Kubernetesインテグレーションにより、New Relic Infrastructureエージェントを活用して、環境の健全性とパフォーマンスのフルオブザーバビリティを実現します。このエージェントは、[Kubernetesイベントインテグレーション](/docs/integrations/kubernetes-integration/kubernetes-events/install-kubernetes-events-integration)、[Prometheusエージェント](/docs/infrastructure/prometheus-integrations/install-configure-prometheus-agent/install-prometheus-agent/)、[New Relicログプラグイン](/docs/logs)など、その他のさまざまなNew Relicインテグレーションとともにクラスタからメトリクスを収集します。

Kubernetesインテグレーションのインストールには、次のオプションがあります。

* [New Relic Kubernetesのクイックスタート](https://newrelic.com/instant-observability/kubernetes)。このクイックスタートには、ダッシュボード、インストゥルメンテーション、アラートなどの事前に構築されたリソースが含まれています。

* [自動化されたガイド付きインストール](https://one.newrelic.com/launcher/k8s-cluster-explorer-nerdlet.cluster-explorer-launcher?pane=eyJuZXJkbGV0SWQiOiJucjEtaW5zdGFsbC1uZXdyZWxpYy5ucjEtaW5zdGFsbC1uZXdyZWxpYyIsInBhdGgiOiJndWlkZWQiLCJlbnYiOiJrdWJlcm5ldGVzIiwiaW5pdGlhbEFjdGlvbkluZGV4IjpudWxsLCJhY3Rpb25JbmRleCI6MX0=)フロー。以下のKubernetesガイド付きインストールドキュメントに従ってKubernetesインテグレーションをインストールする場合は、以下のオプションがあります。

  * New Relic CLI
  * [Helm](https://onenr.io/0Y8wpoYJJQO)。[Helmを使用してKubernetesインテグレーションをインストール](/docs/kubernetes-pixie/kubernetes-integration/installation/install-kubernetes-integration-using-helm)を参照
  * マニフェスト

Kubernetesのユーザーとして、Kubernetesのクラスタとワークロードをより深く理解するために、[Pixieを使用した自動テレメトリー](/docs/auto-telemetry-pixie/get-started-auto-telemetry-pixie)を検討することをお勧めします。言語エージェントは必要ありません。

<Callout variant="tip">
  New Relicアカウントが[EU地域](/docs/using-new-relic/welcome-new-relic/get-started/our-eu-us-region-data-centers)にある場合は、**[one.eu.newrelic.com](http://one.eu.newrelic.com/launcher/k8s-cluster-explorer-nerdlet.cluster-explorer-launcher?pane=eyJuZXJkbGV0SWQiOiJucjEtaW5zdGFsbC1uZXdyZWxpYy5ucjEtaW5zdGFsbC1uZXdyZWxpYyIsInBhdGgiOiJndWlkZWQiLCJlbnYiOiJrdWJlcm5ldGVzIiwiaW5pdGlhbEFjdGlvbkluZGV4IjpudWxsLCJhY3Rpb25JbmRleCI6MX0=)**からガイド付きインストールにアクセスします。
</Callout>

## Kubernetesのガイド付きインストール [#guided-install]

当社のガイド付きインストールは、サーバー、仮想マシン、特権のない環境など、多くのタイプのインストールをサポートします。また、マネージドサービスまたはプラットフォームへのインストレーションにも対応できます。

<Callout variant="important">
  サポートされているKubernetesバージョンを使用していることを確認してください。[互換性と要件ページ](/docs/kubernetes-pixie/kubernetes-integration/get-started/kubernetes-integration-compatibility-requirements)を確認してください。
</Callout>

### マネージドサービスまたはプラットフォームに関する予備的な注意事項 [#cloud-platforms]

[ガイド付きインストール](https://one.newrelic.com/nr1-core?state=51fbbd48-c8ca-ead9-bb90-af96e18d82a7)を起動する前に、以下のマネージドサービスまたはプラットフォームのメモを確認してください。

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="install-amazon-eks"
    title={<><img src={kubernetesEks} alt="EKS" style={{ verticalAlign: 'middle' }}/>Amazon EKS / EKS Anywhere / ベアメタル上のEKS Anywhere</>}
  >
    Kubernetesインテグレーションは、ワーカーノードを監視します。Amazon EKSでは、マスターノードはAmazonによって管理され、Kubernetesプラットフォームから抽出されます。

    [ガイド付きインストール](https://one.newrelic.com/nr1-core?state=51fbbd48-c8ca-ead9-bb90-af96e18d82a7)を起動し、KubernetesインテグレーションをAmazon EKSにデプロイする前に、`kubectl`の[AWSバージョン](https://docs.aws.amazon.com/eks/latest/userguide/configure-kubectl.html)を使用していることを確認します。
  </Collapser>

  <Collapser
    className="freq-link"
    id="install-amazon-eks-fargate"
    title={<><img src={kubernetesEks} alt="EKS" style={{ verticalAlign: 'middle' }}/>Amazon EKS Fargate</>}
  >
    EKS Fargateクラスタにインストールするには、専用の手順が必要です。詳細は、[EKS Fargateインストレーションドキュメント](/docs/integrations/kubernetes-integration/installation/install-fargate-integration)を参照してください。
  </Collapser>

  <Collapser
    className="freq-link"
    id="install-google-kubernetes-engine"
    title={<><img src={kubernetesCke} alt="CKE" style={{ verticalAlign: 'middle' }}/>Google Kubernetes Engine (GKE)</>}
  >
    GoogleはKubernetesプラットフォームから離れたマスターノードの管理を抽象化するため、KubernetesインテグレーションではGKEのワーカーノードのみを監視します。

    [ガイド付きインストール](https://one.newrelic.com/nr1-core?state=51fbbd48-c8ca-ead9-bb90-af96e18d82a7)を起動し、GKEにKubernetesインテグレーションをデプロイする前に、十分な権限があることを確認してください。

    1. [console.cloud.google.com/iam-admin/iam](https://console.cloud.google.com/iam-admin/iam)に移動し、ユーザー名を見つけます。
    2. **編集**をクリックします。
    3. `Roles`および`ClusterRoles`を作成する権限があることを確認します。不確かな場合は、**Kubernetes Engine Cluster Admin**ロールを追加します。ユーザーロールを編集できない場合は、必要なパーミッションを付与してもらうようGCPプロジェクトのオーナーに依頼してください。
  </Collapser>

  <Collapser
    className="freq-link"
    id="install-openshift-container-platform"
    title={<><img src={kubernetesOpenshift} alt="OpenShift" style={{ verticalAlign: 'middle' }}/>OpenShiftコンテナプラットフォーム</>}
  >
    [OpenShift](https://learn.openshift.com)でKubernetesインテグレーションをデプロイするには、

    1. インテグレーションで使用されるサービスアカウントを、以下の特権がある[セキュリティコンテキスト制約](https://docs.openshift.com/enterprise/3.0/admin_guide/manage_scc.html)に追加します。

       ```
       oc adm policy add-scc-to-user privileged system:serviceaccount:<namespace>:<release_name>-newrelic-infrastructure
       oc adm policy add-scc-to-user privileged system:serviceaccount:<namespace>:<release_name>-newrelic-infrastructure-controlplane
       oc adm policy add-scc-to-user privileged system:serviceaccount:<namespace>:<release_name>-kube-state-metrics
       oc adm policy add-scc-to-user privileged system:serviceaccount:<namespace>:<release_name>-newrelic-logging
       oc adm policy add-scc-to-user privileged system:serviceaccount:<namespace>:<release_name>-nri-kube-events
       oc adm policy add-scc-to-user privileged system:serviceaccount:<namespace>:<release_name>-nri-metadata-injection-admission
       oc adm policy add-scc-to-user privileged system:serviceaccount:<namespace>:default
       ```

       <Callout variant="tip">
         インストーラが提供するデフォルトの`release_name`は`newrelic-bundle`です。デフォルトの`namespace`は`newrelic`です。
       </Callout>

    2. [ガイド付きインストール](https://one.newrelic.com/nr1-core?state=51fbbd48-c8ca-ead9-bb90-af96e18d82a7)の手順を完了します。

    3. 署名入りの証明書を使用している場合、マニフェスト内の`DaemonSet`部分で以下の変数を使用して`.pem`ファイルを設定することで、証明書が適切に設定されていることを確認します：

       ```yaml
       env:
         - name: NRIA_CA_BUNDLE_DIR
           value: YOUR_CA_BUNDLE_DIR
         - name: NRIA_CA_BUNDLE_FILE
           value: YOUR_CA_BUNDLE_NAME
       ```

    4. YAMLキーパスを`spec.template.spec.containers.name.env`に設定します。

    5. 変更内容を保存します。
  </Collapser>

  <Collapser
    className="freq-link"
    id="install-azure-aks"
    title={<><img src={kubernetesAks} alt="AKS" style={{ verticalAlign: 'middle' }}/>Azure Kubernetes Service (AKS)</>}
  >
    AzureはKubernetesプラットフォームから離れたマスターノードの管理を抽象化するため、KubernetesインテグレーションではAzure Kubernetes Serviceのワーカーノードのみを監視します。

    Azure Kubernetes Service（AKS）にデプロイするには、[ガイド付きインストール](https://one.newrelic.com/nr1-core?state=51fbbd48-c8ca-ead9-bb90-af96e18d82a7)の手順を完了します。
  </Collapser>

  <Collapser
    className="freq-link"
    id="install-pks"
    title={<><img src={kubernetesPivotal} alt="PKS" style={{ verticalAlign: 'middle' }}/>Pivotal Container Service (PKS / VMware Tanzu)</>}
  >
    PKSにデプロイする場合、[ガイド付きインストール](https://one.newrelic.com/nr1-core?state=51fbbd48-c8ca-ead9-bb90-af96e18d82a7)を使用することを推奨します。または、[Helmを使用してKubernetesインテグレーションをインストール](/docs/integrations/kubernetes-integration/installation/install-kubernetes-integration-using-helm)に記載された手動の指示に従います。
  </Collapser>
</CollapserGroup>

<InstallFeedback/>

### ガイド付きインストールの使用 [#installer]

サーバー、VM、特権のない環境に、ガイド付きインストールを使用することをお勧めします。ガイド付きインストールは、Helmを使用しない場合は、必要な値が入力されたHelmコマンド、またはプレーンなマニフェストを提供できます。また、有効にする機能と収集するデータを制御することもできます。マネージドクラウドにインテグレーションをインストールする場合は、先に進む前に、これらの[予備ノート](#cloud-platforms)を参照してください。

ガイド付きインストールを開始する前に、New Relicアカウントを所有していることを確認してください。無料です。クレジットカードは必要ありません。

New Relicアカウントが[EU地域にある](/docs/using-new-relic/welcome-new-relic/get-started/our-eu-us-region-data-centers)場合は、EUインストールオプションを選択します。

<ButtonGroup>
  <ButtonLink
    data-tessen="stitchedPathLinkClick"
    role="button"
    to="https://newrelic.com/signup"
    variant="primary"
  >
    アカウントの取得
  </ButtonLink>

  <ButtonLink
    role="button"
    to="https://one.newrelic.com/launcher/k8s-cluster-explorer-nerdlet.cluster-explorer-launcher?pane=eyJuZXJkbGV0SWQiOiJpbnN0YWxsLW5ld3JlbGljLmhvbWUiLCJwYXRoIjoiZ3VpZGVkIiwiZW52Ijoia3ViZXJuZXRlcyIsImFjdGl2ZUVudmlyb25tZW50IjogImt1YmVybmV0ZXMifQ=="
    variant="primary"
  >
    ガイド付きインストール
  </ButtonLink>
</ButtonGroup>

カスタムマニフェストがHelmの代わりに使用されている場合、まず`kubectl delete -f previous-manifest-file.yml`を使用して古いインストレーションを削除してから、ガイド付きインストーラを再度実行する必要があります。これにより、`kubectl apply -f manifest-file.yml`を使用してデプロイできる一連のマニフェストが更新されます。

## Kubernetesデータの使用

以下の方法の詳細をご覧ください。

* [UIでKubernetesデータを探索する](/docs/kubernetes-pixie/kubernetes-integration/understand-use-data/kubernetes-cluster-explorer)
* [Kubernetesデータ](/docs/kubernetes-pixie/kubernetes-integration/understand-use-data/find-use-your-kubernetes-data)をクエリ、チャート、アラートなどで使用します。